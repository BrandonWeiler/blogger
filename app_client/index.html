<!DOCTYPE html>
<html ng-app="bloggerApp">
	<head>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css" integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc" crossorigin="anonymous">
		<script
      		src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.1/angular.min.js"
      		integrity="sha512-QFmqHpmYymVcJudvGsU3IDBfwnTOdfmY42YUwyORin2namhG6FCku8MiSc6igF2OIwChlEuFkvuwNo6pbMOUSg=="
      		crossorigin="anonymous"></script>
    	<script
      		src="https://cdnjs.cloudflare.com/ajax/libs/angular-route/1.8.1/angular-route.min.js"
      		integrity="sha512-pW5u94XNfb4HGKqQ9XUdZzAlfGSPWkha6VYghlIGqCBNlYqyPt1wo5m8jf2So8mNTodVwj1CQIayRP+x2Q5c+g=="
      		crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/1.0.28/angular-ui-router.min.js"> </script>
	</head>
	<body>
		<!--Navigation bar implementation -->

		<div ng-Controller="NavigationController">
			<navigation></navigation>  
		</div>  

			<!-- Angular Templates -->
			<script type="text/ng-template" id="pages/home.html">
				<div id="home">
						<p id="homeTitle">{{vm.title}}</p>
				</div>
				<div ng-repeat="entry in blogs">
					<div id="blog">
						<p id="blogTitle">{{ entry.blogTitle }}</p>
						<p id="blogText">{{ entry.blogText }}</p>
						<p id="date">Published by: <b>{{entry.userName}}</b> on {{ entry.dateStamp | date:'short' }}</p>
						<a ng-show="vm.isLoggedIn() && vm.correctUser() === entry.userName" href="/blogedit/{{entry._id}}">>Edit PinG<</a><p>     </p>
						<a ng-show="vm.isLoggedIn() && vm.correctUser() === entry.userName" href="/blogdelete/{{entry._id}}">>Delete PinG<</a>
						<a ng-show="vm.isLoggedIn()" href="/comment/{{entry._id}}">>Comment<</a>
						<p id="blogTitle">------------------------------------------------------------------------------------------------------</p>
						<br><br>
					</div>	
				</div>
			</script>
				
			<script type="text/ng-template" id="pages/bloglist.html">
    			<div id='home'>
					<p id="homeTitle">{{ vm.title }}</p>
				</div>
				<div ng-repeat="entry in blogs">
					<div ng-show="vm.correctUser() === entry.userName" id="blog">
						<p id="blogTitle">{{ entry.blogTitle }}</p>
						<p id="blogText">{{ entry.blogText }}</p>
						<p id="date">Published by: <b>{{entry.userName}}</b> on {{ entry.dateStamp | date:'short' }}</p>
						<a ng-show="vm.isLoggedIn() && vm.correctUser() === entry.userName" href="/blogedit/{{entry._id}}">>Edit PinG<</a><p>     </p>
						<a ng-show="vm.isLoggedIn() && vm.correctUser() === entry.userName" href="/blogdelete/{{entry._id}}">>Delete PinG<</a>
						<a ng-show="vm.isLoggedIn()" href="/comment/{{entry._id}}">>Comment<</a>
						<p id="blogTitle">------------------------------------------------------------------------------------------------------</p>
						<br><br>
					</div>	
				</div>
			</script>

			<script type="text/ng-template" id="pages/blogadd.html">
				<div id='home'>
					<p id="homeTitle">{{vm.title}}</p>
				</div>
				<form name="userForm" ng-Controller="addCtrl" ng-submit="vm.onSubmit()">
					<div class="form-group">
						  <label id= "blogAddLabel">PinG Title:</label>
						  <input type="text" class="form-control" placeholder="Enter the PinG Title" id="blogTitle" name="blogTitle">
					</div>	
					<div class="form-group">
						<label id="blogAddLabel" for="blogText">PinG Text:</label>
						<textarea type="text" class="form-control" name="blogText" rows="20" placeholder="PinG Goes Here!"></textarea>
					</div>
					<button type="submit">Submit</button>
			    </form>
			</script>

			<script type="text/ng-template" id="pages/blogedit.html">
				<div id='home'>
					<p id="homeTitle">{{vm.title}}</p>
				</div>
				<form name="userForm" ng-Controller="editCtrl" ng-submit="vm.onSubmit()">
					<div class="form-group">
						<label id="blogAddLabel" for="blogTitle">PinG Title:</label>
						<input type="text" class="form-control"  id="blogTitle" name="blogTitle" value= "{{blog.blogTitle}}">
					</div>
					<div class="form-group">
						<label id="blogAddLabel" for="blogText">PinG Text:</label>
						<textarea type="text" class= "form-control" name="blogText" rows="20" >{{blog.blogText}}</textarea>
					</div>
					<button type="submit">Save PinG</button>
				   </form>	
			</script>

			<script type="text/ng-template" id="pages/comment.html">
				<div id='home'>
					<p id="homeTitle">{{vm.title}}</p>
				</div>
				<div ng-Controller="commentCtrl">
					<div id="blogAddLabel" ng-repeat="comment in comments" ng-show="{{comment.commentID === vm.id}}">
						<p>{{comment.commentText}}     {{comment.commentName}}      {{comment.commentDateStamp}}</p>
					</div>
				</div>
				<form name="userForm" ng-Controller="commentCtrl" ng-submit="vm.onSubmit()">
					<div class="form-group">
						<input type="text" id="commentBlock" class="form-control" name="commentText"> 
					</div>
					<button type="submit">Comment</button>
				</form>

			</script>

			<script type="text/ng-template" id="pages/blogdelete.html">
				<div id='home'>
					<p id="homeTitle">{{vm.title}}</p>
				</div>
				<form name="userForm" ng-Controller="deleteCtrl" ng-submit="vm.onSubmit()">
					<div class="form-group">
						<label id="blogAddLabel" for="blogTitle">PinG Title:</label>
						<input type="text" class="form-control"  id="blogTitle" name="blogTitle" value= "{{blog.blogTitle}}" readonly>
					</div>
					<div class="form-group">
						<label id="blogAddLabel" for="blog_text">PinG Text:</label>
						<textarea type="text" class= "form-control" name="blogText" rows="20" readonly>{{blog.blogText}}</textarea>
					</div>
					<button type="submit">Delete this PinG</button>
					<a href="/bloglist" > Cancel </a>
				</form>
			</script>

<!-- Angular View (dynamic content goes here) -->
			<div ng-view ></div>
			<script src="/bloggerApp.js"></script>
			<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
			<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
	</body>
</html>	
